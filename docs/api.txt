The 'api' command allows AresMUSH games to communicate with the central AresMUSH server (and vice-versa), enabling cross-game functionality. 

Note:  From here on out, the central server is called AresCentral and the other individual MUSHes are called Satellites.

All commands follow the pattern:

    COMMAND (C):   api> <game id> <keycode> <command> <args>
    RESPONSE (R):  api< <keycode> <command> <status - OK or ERR> <args>
    
The command and response strings are always encrypted using a shared password (set up during registration) and an ever-changing keycode (included in the message)

A few definitions:

    game id: A way to uniquely identify a game, even if the name later changes.
    character id:  A way to uniquely identify a character at a game, even if the char
       name later changes.
 
******* REGISTRATION *******

When an AresMUSH game first starts up, it registers itself with AresCentral.  AresCentral responds with a game-specific id and password.  These will be used in future commands.  The game ID uniquely identifies the game, and the password is used to encrypt all traffic between the servers.  

    From Satellite to AresCentral:
    (C) register <host>||<port>||<game name>||<game category>||<game description>
    (R) register <game id>||<password>

Note: When issuing the very first command, a default game ID of '-1' and a default password is used.
    
******* REGISTRATION UPDATE *******

If your game name or server info changes, the game can issue a registration update.  AresCentral can do the same.

    From AresCentral to Satellite or vice-versa:
    (C) register/update <host>||<port>||<game name>||<game category>||<game description>
    (R) register/update <OK or an error string>

******* PING *******

Once a day, AresCentral will issue a ping command just to make sure the Satellite is still there, and its information is up to date.

    From AresCentral to Satellite:
    (C) ping
    (R) ping <list of online handles in the form handle:charid>
    
******* HANDLE LINK *******

A Satellite game can request that a local character be linked to the handle.  This requires a one-time use code that the player gets from AresCentral (see help handles).

    From Satellite to AresCentral:
    (C) handle/link <character id>||<one-time code>
    (R) handle/link <OK or an error string>

******* HANDLE UNLINK *******

AresCentral can issue a handle unlink.

    From AresCentral to Satellite:
    (C) handle/unlink <character id>||<handle>
    (R) handle/unlink <OK or an error string>
    
******* HANDLE SYNC *******

You can synchronize preferences between the Satellite and AresCentral.

The upload command replaces the AresCentral preferences with the Satellite preferences (except friends, which are merged).

    From Satellite to AresCentral:
    (C) handle/upload <character id>||<preferences>
    (R) handle/upload <OK or an error string>

The download command works the other way around.

    From Satellite to AresCentral:
    (C) handle/download <character id>
    (R) handle/download <character id>||<preferences>
    
AresCentral can also initiate a download (typically used when the player changes a preference on AresCentral and wants to sync all of his games).

    From AresCentral to Satellite:
    (C) handle/update <character id>||<preferences>
    (R) handle/update <OK or an error message>

******* HANDLE LOGIN *******

When a character linked to a handle logs in, the Satellite should check with AresCentral to make sure that the handle information is still correct.

    From Satellite to AresCentral:
    (C) handle/login <character id>||<handle>
    (R) handle/login <OK or an error message>

******* HANDLE LOGOUT *******

When a character linked to a handle logs out, the Satellite should notify AresCentral.

    From Satellite to AresCentral:
    (C) handle/logout <character id>||<handle>
    (R) handle/logout <OK or an error message>
    
******* HANDLE ADD FRIEND *******

On a sattelite, a character can add someone's handle as a friend.

    From Satellite to AresCentral:
    (C) friend/add <handle>
    (R) friend/add <OK or an error message>

******* HANDLE REMOVE FRIEND *******

On a sattelite, a character can remove someone's handle from their friends list.

    From Satellite to AresCentral:
    (C) friend/remove <handle>
    (R) friend/remove <OK or an error message>
    
******* PROFILE *******

The Satellite can request a handle's profile information.  The character ID must pass the target's privacy settings.

    From Satellite to AresCentral:
    (C) profile <character id>||<handle>
    (R) profile <profile text or an error message>
    
******* CROSS-GAME PAGE (someday) *******

You can page someone by their handle, even if they're on a different game.  If the character is not logged into AresCentral, AresCentral will use the character login status to find a character who's online somewhere else and page them on the other game. The character ID must pass the target's privacy settings.

    From Satellite to AresCentral or vice-versa:
    (C) page <to handle>||<from handle>||<message>
    (R) page <OK or an error message>